rajat@Rajats-MacBook-Pro client % pnpm de
v

> client@0.1.0 dev /Users/rajat/Downloads/projects/erp/client
> next dev --turbopack

 ⚠ Port 3000 is in use by process 32708, using available port 3001 instead.
   ▲ Next.js 15.4.4 (Turbopack)
   - Local:        http://localhost:3001
   - Network:      http://192.168.0.102:3001
   - Environments: .env.local
   - Experiments (use with caution):
     ✓ webpackBuildWorker

 ✓ Starting...
 ✓ Ready in 1303ms
 ⚠ Webpack is configured while Turbopack is not, which may cause problems.
 ⚠ See instructions if you need to configure Turbopack:
  https://nextjs.org/docs/app/api-reference/next-config-js/turbopack


 *  History restored 

rajat@Rajats-MacBook-Pro client % cd "/Us
ers/rajat/Downloads/projects/erp"
rajat@Rajats-MacBook-Pro erp % cd server
rajat@Rajats-MacBook-Pro server % pnpm er
ror

> factory-erp-server@1.0.0 error /Users/rajat/Downloads/projects/erp/server
> npx tsc --noEmit --skipLibCheck

src/controllers/GreyFabricInwardController.ts:746:7 - error TS2322: Type '"returned"' is not assignable to type '"pending" | "approved" | "rejected" | "partially_approved" | "stock_created"'.

746       grn.status = 'returned';
          ~~~~~~~~~~

src/controllers/GreyFabricInwardController.ts:747:20 - error TS2551: Property 'returnedQuantity' does not exist on type '{ receivedQuantity: number; unit: "meters" | "yards" | "pieces"; acceptedQuantity: number; rejectedQuantity: number; shortQuantity: number; excessQuantity: number; }'. Did you mean 'rejectedQuantity'?

747       grn.quantity.returnedQuantity = returnQuantity;
                       ~~~~~~~~~~~~~~~~

  src/models/GreyFabricInward.ts:101:5
    101     rejectedQuantity: number;
            ~~~~~~~~~~~~~~~~
    'rejectedQuantity' is declared here.

src/controllers/GreyFabricInwardController.ts:833:17 - error TS2339: Property 'addProductionOutput' does not exist on type 'Document<unknown, {}, IGreyFabricInward, {}> & IGreyFabricInward & Required<{ _id: ObjectId; }> & { __v: number; }'.

833       await grn.addProductionOutput(outputData);
                    ~~~~~~~~~~~~~~~~~~~

src/controllers/GreyFabricInwardController.ts:880:17 - error TS2339: Property 'updateProductionOutputStatus' does not exist on type 'Document<unknown, {}, IGreyFabricInward, {}> & IGreyFabricInward & Required<{ _id: ObjectId; }> & { __v: number; }'.

880       await grn.updateProductionOutputStatus(
                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~

src/controllers/GreyFabricInwardController.ts:939:17 - error TS2339: Property 'updateMaterialConsumption' does not exist on type 'Document<unknown, {}, IGreyFabricInward, {}> & IGreyFabricInward & Required<{ _id: ObjectId; }> & { __v: number; }'.

939       await grn.updateMaterialConsumption(consumedQuantity, wasteQuantity, notes);
                    ~~~~~~~~~~~~~~~~~~~~~~~~~

src/controllers/GreyFabricInwardController.ts:1069:46 - error TS2339: Property 'getClientMaterialSummary' does not exist on type 'Model<IGreyFabricInward, {}, {}, {}, Document<unknown, {}, IGreyFabricInward, {}> & IGreyFabricInward & Required<{ ...; }> & { ...; }, any>'.

1069       const summary = await GreyFabricInward.getClientMaterialSummary(clientId as string);
                                                  ~~~~~~~~~~~~~~~~~~~~~~~~

src/controllers/GreyFabricInwardController.ts:1093:46 - error TS2339: Property 'getClientMaterialBalance' does not exist on type 'Model<IGreyFabricInward, {}, {}, {}, Document<unknown, {}, IGreyFabricInward, {}> & IGreyFabricInward & Required<{ ...; }> & { ...; }, any>'.

1093       const balance = await GreyFabricInward.getClientMaterialBalance(clientId);
                                                  ~~~~~~~~~~~~~~~~~~~~~~~~

src/controllers/GreyFabricInwardController.ts:1118:46 - error TS2339: Property 'getClientMaterialHistory' does not exist on type 'Model<IGreyFabricInward, {}, {}, {}, Document<unknown, {}, IGreyFabricInward, {}> & IGreyFabricInward & Required<{ ...; }> & { ...; }, any>'.

1118       const history = await GreyFabricInward.getClientMaterialHistory(clientId, grnId as string);
                                                  ~~~~~~~~~~~~~~~~~~~~~~~~

src/models/InventoryItem.ts:298:3 - error TS2353: Object literal may only specify known properties, and 'batchOutputInfo' does not exist in type '{ id?: SchemaDefinitionProperty<any, IInventoryItem, Document<unknown, {}, FlatRecord<IInventoryItem>, {}> & FlatRecord<IInventoryItem> & Required<...> & { ...; }>; ... 31 more ...; lastModifiedBy?: SchemaDefinitionProperty<...>; }'.

298   batchOutputInfo: {
      ~~~~~~~~~~~~~~~

src/models/InventoryItem.ts:389:8 - error TS2339: Property 'stock' does not exist on type 'IfAny<FlatRecord<DocType>, any, TVirtuals & TInstanceMethods extends Record<string, never> ? Document<unknown, {}, FlatRecord<...>, TVirtuals> & Default__v<...> : IfAny<...>>'.

389   this.stock.availableStock = Math.max(0, this.stock.currentStock - this.stock.reservedStock);
           ~~~~~

src/models/InventoryItem.ts:389:48 - error TS2339: Property 'stock' does not exist on type 'IfAny<FlatRecord<DocType>, any, TVirtuals & TInstanceMethods extends Record<string, never> ? Document<unknown, {}, FlatRecord<...>, TVirtuals> & Default__v<...> : IfAny<...>>'.

389   this.stock.availableStock = Math.max(0, this.stock.currentStock - this.stock.reservedStock);
                                                   ~~~~~

src/models/InventoryItem.ts:389:74 - error TS2339: Property 'stock' does not exist on type 'IfAny<FlatRecord<DocType>, any, TVirtuals & TInstanceMethods extends Record<string, never> ? Document<unknown, {}, FlatRecord<...>, TVirtuals> & Default__v<...> : IfAny<...>>'.

389   this.stock.availableStock = Math.max(0, this.stock.currentStock - this.stock.reservedStock);
                                                                             ~~~~~

src/models/InventoryItem.ts:392:8 - error TS2339: Property 'stock' does not exist on type 'IfAny<FlatRecord<DocType>, any, TVirtuals & TInstanceMethods extends Record<string, never> ? Document<unknown, {}, FlatRecord<...>, TVirtuals> & Default__v<...> : IfAny<...>>'.

392   this.stock.totalValue = this.stock.currentStock * this.stock.averageCost;
           ~~~~~

src/models/InventoryItem.ts:392:32 - error TS2339: Property 'stock' does not exist on type 'IfAny<FlatRecord<DocType>, any, TVirtuals & TInstanceMethods extends Record<string, never> ? Document<unknown, {}, FlatRecord<...>, TVirtuals> & Default__v<...> : IfAny<...>>'.

392   this.stock.totalValue = this.stock.currentStock * this.stock.averageCost;
                                   ~~~~~

src/models/InventoryItem.ts:392:58 - error TS2339: Property 'stock' does not exist on type 'IfAny<FlatRecord<DocType>, any, TVirtuals & TInstanceMethods extends Record<string, never> ? Document<unknown, {}, FlatRecord<...>, TVirtuals> & Default__v<...> : IfAny<...>>'.

392   this.stock.totalValue = this.stock.currentStock * this.stock.averageCost;
                                                             ~~~~~

src/models/InventoryItem.ts:396:10 - error TS2339: Property 'tracking' does not exist on type 'IfAny<FlatRecord<DocType>, any, TVirtuals & TInstanceMethods extends Record<string, never> ? Document<unknown, {}, FlatRecord<...>, TVirtuals> & Default__v<...> : IfAny<...>>'.

396     this.tracking.lastStockUpdate = new Date();
             ~~~~~~~~

src/models/InventoryItem.ts:677:23 - error TS2339: Property 'createFromBatchOutput' does not exist on type 'Document<unknown, any, RawDocType, any> & ((Required<{ _id: unknown; }> & { __v: number; }) | ({ _id: ObjectId; } & { __v: number; }))'.
  Property 'createFromBatchOutput' does not exist on type 'Document<unknown, any, RawDocType, any> & Required<{ _id: unknown; }> & { __v: number; }'.

677   await inventoryItem.createFromBatchOutput(batchOutput, batchInfo, elongationInfo, clientInfo);
                          ~~~~~~~~~~~~~~~~~~~~~

src/models/InventoryItem.ts:689:16 - error TS2339: Property 'stock' does not exist on type 'IfAny<FlatRecord<DocType>, any, TVirtuals & TInstanceMethods extends Record<string, never> ? Document<unknown, {}, FlatRecord<...>, TVirtuals> & Default__v<...> : IfAny<...>>'.

689   return (this.stock?.currentStock || 0) * (this.pricing?.costPrice || 0);
                   ~~~~~

src/models/InventoryItem.ts:689:50 - error TS2339: Property 'pricing' does not exist on type 'IfAny<FlatRecord<DocType>, any, TVirtuals & TInstanceMethods extends Record<string, never> ? Document<unknown, {}, FlatRecord<...>, TVirtuals> & Default__v<...> : IfAny<...>>'.

689   return (this.stock?.currentStock || 0) * (this.pricing?.costPrice || 0);
                                                     ~~~~~~~

src/models/InventoryItem.ts:693:16 - error TS2339: Property 'stock' does not exist on type 'IfAny<FlatRecord<DocType>, any, TVirtuals & TInstanceMethods extends Record<string, never> ? Document<unknown, {}, FlatRecord<...>, TVirtuals> & Default__v<...> : IfAny<...>>'.

693   return (this.stock?.currentStock || 0) <= (this.stock?.reorderLevel || 0);
                   ~~~~~

src/models/InventoryItem.ts:693:51 - error TS2339: Property 'stock' does not exist on type 'IfAny<FlatRecord<DocType>, any, TVirtuals & TInstanceMethods extends Record<string, never> ? Document<unknown, {}, FlatRecord<...>, TVirtuals> & Default__v<...> : IfAny<...>>'.

693   return (this.stock?.currentStock || 0) <= (this.stock?.reorderLevel || 0);
                                                      ~~~~~

src/models/InventoryItem.ts:697:29 - error TS2339: Property 'stock' does not exist on type 'IfAny<FlatRecord<DocType>, any, TVirtuals & TInstanceMethods extends Record<string, never> ? Document<unknown, {}, FlatRecord<...>, TVirtuals> & Default__v<...> : IfAny<...>>'.

697   const currentStock = this.stock?.currentStock || 0;
                                ~~~~~

src/models/InventoryItem.ts:698:29 - error TS2339: Property 'stock' does not exist on type 'IfAny<FlatRecord<DocType>, any, TVirtuals & TInstanceMethods extends Record<string, never> ? Document<unknown, {}, FlatRecord<...>, TVirtuals> & Default__v<...> : IfAny<...>>'.

698   const reorderLevel = this.stock?.reorderLevel || 0;
                                ~~~~~

src/services/BatchOutputService.ts:84:49 - error TS2339: Property 'createInventoryFromBatchOutput' does not exist on type 'Model<IInventoryItem, {}, {}, {}, Document<unknown, {}, IInventoryItem, {}> & IInventoryItem & Required<{ _id: ObjectId; }> & { ...; }, any>'.

84       const inventoryItem = await InventoryItem.createInventoryFromBatchOutput(
                                                   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

src/services/BatchOutputService.ts:222:17 - error TS2339: Property 'addProductionOutput' does not exist on type 'Document<unknown, {}, IGreyFabricInward, {}> & IGreyFabricInward & Required<{ _id: ObjectId; }> & { __v: number; }'.

222       await grn.addProductionOutput(outputData);
                    ~~~~~~~~~~~~~~~~~~~


Found 25 errors in 3 files.

Errors  Files
     8  src/controllers/GreyFabricInwardController.ts:746
    15  src/models/InventoryItem.ts:298
     2  src/services/BatchOutputService.ts:84
 ELIFECYCLE  Command failed with exit code 2.
rajat@Rajats-MacBook-Pro server % 